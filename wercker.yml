box: php:5.6
services:
  - mysql
build:
  steps:
    - script:
        name: apt-get update
        code: sudo apt-get update
    - install-packages:
      packages: autoconf build-dep libmysqlclient-dev php5-common php5-mysql php5-gd
    - script:
        name: install pecl pdo_mysql
        code: pecl install -f pdo_mysql
    - script:
        name: echo PHP information
        code: |-
            php -v
            php -i
    - script:
        name: install OpenPNE
        code: |
          cat config/OpenPNE.yml.sample |sed -e "s/example\.com/0.0.0.0/g" > config/OpenPNE.yml
          cp config/ProjectConfiguration.class.php.sample config/ProjectConfiguration.class.php
          php symfony openpne:fast-install --dbms=mysql --dbhost="localhost" --dbuser="root" --dbname="openpne3"
    - script:
        name: PHPUnit integration tests
        code: |-
            php  test/unit/helper/opUtilHelperTest.php 
