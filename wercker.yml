box:
  id: openpne/openpne3-env:latest
build:
  steps:
    - install-packages:
      packages: git
    - script:
        name: pre settings
        code: service mysql start
        code: git clone --depth=0 git://github.com/upsilon/opIgnoreKnownErrorsPlugin.git plugins/opIgnoreKnownErrorsPlugin
    - script:
        name: install OpenPNE
        code: |
          cp config/ProjectConfiguration.class.php{.sample,}
          cp config/OpenPNE.yml{.sample,}
          php symfony openpne:fast-install --dbms=mysql --dbhost="localhost" --dbuser="root" --dbname="openpne3"
    - script:
        name: PHPUnit integration tests
        code: |-
            php  test/unit/helper/opUtilHelperTest.php 
